# packs/lang/en-gb.yaml
# English (United Kingdom)
# Inherits from: default.yaml -> en.yaml

settings:
  # Keep word-final long /uː/ (do/two/you) from sounding too clipped.
  englishLongUWordFinalScale: 1.00


normalization:
  preReplacements:
    # PRICE/MOUTH (five/nine/out): UK starts this diphthong a bit more open.
    # Use an English-UK specific internal "a" variant so US tuning doesn't leak into en-gb.
    - from: "aɪ"
      to:   "ᵃɪ"
    - from: "a͡ɪ"
      to:   "ᵃ͡ɪ"

    # Tie PRICE before schwa in triphthongs (e.g. "dialog", "fire") after UK vowel mapping.
    - from: "ᵃɪə"
      to:   "ᵃ͡ɪə"
    - from: "aʊ"
      to:   "ᵃʊ"
    - from: "a͡ʊ"
      to:   "ᵃ͡ʊ"

    # FACE before schwa in words like "player", "layer", "prayer".
    # eSpeak en-gb outputs plˈe‍ɪə (ZWJ marks the diphthong). Our global cleanup strips ZWJ,
    # which leaves eɪə as three vowel-ish tokens and can sound like "play-ay-er".
    # Fix: tie the FACE diphthong and use the short schwa separator (ᵊ) for the offglide.
    - from: "pəɹˈɛn"
      to:   "pˈæɹən"

  classes:
    BATH_FOLLOW: ["s", "f", "θ"]

  replacements:
    # Broad BATH (bath/cast/fast): æ -> ɑː before s/f/θ
    - from: "æ"
      to: "ɑː"
      when:
        beforeClass: BATH_FOLLOW

    # UK THOUGHT rounding: use the internal UK-ish variant.
    - from: "ɔː"
      to: "ᴏː"

    # Non-rhotic NURSE: if any rhotic NURSE slips in, de-rhoticize.
    - from: "ɝː"
      to: "ɜː"
    - from: "ɝ"
      to: "ɜ"
    # Make /d͡ʒ/ a little less 'soft' by keeping the stop+fricative components explicit.
    - from: "d͡ʒ"
      to:   "dʒ"